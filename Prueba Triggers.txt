-- 1. Probar check_fecha_publicacion
-- Esto debería fallar
INSERT INTO Media (titulo, tipo_media, fecha_publicacion, plataforma_id)
VALUES ('Juego Futuro', 'Videojuego', '2025-01-01', 1);

-- Esto debería funcionar
INSERT INTO Media (titulo, tipo_media, fecha_publicacion, plataforma_id)
VALUES ('Juego Actual', 'Videojuego', CURDATE(), 1);

-- 2. Probar actualizar_fecha_coleccion
-- Primero, ver fecha actual en colección
SELECT * FROM Coleccion WHERE usuario_id = 1;

-- Insertar nueva opinión
INSERT INTO Opinion (usuario_id, media_id, numero_estrellas, comentario)
VALUES (1, 1, 4, 'Nueva opinión');

-- Verificar que la fecha se actualizó
SELECT * FROM Coleccion WHERE usuario_id = 1;

-- 3. Probar check_numero_estrellas
-- Esto debería fallar
INSERT INTO Opinion (usuario_id, media_id, numero_estrellas, comentario)
VALUES (1, 1, 6, 'Calificación inválida');

-- Esto debería fallar también
INSERT INTO Opinion (usuario_id, media_id, numero_estrellas, comentario)
VALUES (1, 1, 0, 'Calificación inválida');

-- Esto debería funcionar
INSERT INTO Opinion (usuario_id, media_id, numero_estrellas, comentario)
VALUES (1, 1, 5, 'Calificación válida');